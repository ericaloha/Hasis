##install 


#1. install pgsql with source code


状态  sudo  service postgresql status
启动  sudo  service postgresql start
停止  sudo  service postgresql stop
重启  sudo  service postgresql restart

## create database pbtest
#1. superuser login
./psql postgres
#2.create specific user for pbtest
create user pgsql with password 'root';
create database pbtest owner pgsql;
GRANT ALL PRIVILEGES ON DATABASE pbtest to pgsql;
ALTER ROLE pgsql WITH SUPERUSER;
#3. login with pgsql
./psql -U pgsql -d pbtest -h 127.0.0.1



##USAGE

# 清除密码
sudo passwd -d postgres
# 设置密码
sudo -u postgres passwd
# Enter new UNIX password: 
# Retype new UNIX password: 
# passwd: password updated successfully




状态 sudo /etc/init.d/postgresql status
启动 sudo /etc/init.d/postgresql start
停止 sudo /etc/init.d/postgresql stop
重启 sudo /etc/init.d/postgresql restart


# 命令行查看
psql --version
pg_config | grep VERSION
# 登录数据库 sudo -u postgres psql 
show server_version;


sudo -u postgres psql
# 登录后
ALTER USER postgres WITH PASSWORD 'embedded'; 
# 或者
\password postgres  # 然后输入两次密码








##Others

PostgreSQL 数据库操作
显示已创建的数据库：

\l 
1
在不连接进 PostgreSQL 数据库的情况下，也可以在终端上查看显示已创建的列表：

psql -l
1
连接数据库

\c dbname
1
显示数据库表

\d  
1
创建一个名为 test 的表

CREATE TABLE test(id int, text VARCHAR(50));
1
插入一条记录

INSERT INTO test(id, text) VALUES(1, 'sdfsfsfsdfsdfdf');
1
查询记录

SELECT * FROM test WHERE id = 1;
1
更新记录

UPDATE test SET text = 'aaaaaaaaaaaaa' WHERE id = 1;
1
删除指定的记录

DELETE FROM test WHERE id = 1;
1
删除表

DROP TABLE test;
1
删除数据库

DROP DATABASE dbname;
1
或者利用 dropdb 指令，在终端上删除数据库

dropdb -U user dbname
1
4、导入导出数据库
（1）导出
命令：

pg_dump -U <用户名> -c <库名> -f <文件路径>
1
例如：

pg_dump -U postgres -c test -f /home/test.sql
1
（2）导入
命令：

psql -U [数据库用户名] -d [数据库名] < [sql文件路径]
psql -U postgres -d huiliu_web_development < /Users/rushboy/rails/yun_chang/huiliu-web/huiliu.sql
1
2
\i <文件路径>
1
例如：

登录到数据库里面去执行；

postgres=# \c test
You are now connected to database "test" as user "postgres".
test=# \i /home/test.sql
1
2
3
四、导入导出数据表
（1）导出
命令：

pg_dump -U <用户名> -t <表名> <库名> > <文件路径>
1
例如：

库名为：test

表名为：yunweijia

pg_dump -U postgres -t yunweijia test > /home/bf/230629/yunweijia.sql
1
（2）导入
命令：

psql -U <用户名> <库名> < <文件路径>
1
例如：

psql -U postgres test < /home/bf/230629/yunweijia.sql
1
————————————————
版权声明：本文为CSDN博主「微信-since81192」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
原文链接：https://blog.csdn.net/qq_41037744/article/details/119533311















